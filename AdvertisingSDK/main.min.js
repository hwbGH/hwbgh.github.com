!function(e,t,i){i=i(e,t),"function"==typeof e.define&&(define.amd||define.cmd)?define(function(){return i}):e.mTouch=e.mTouch||i}(window||this,document,function(e,t){function i(e){if(!e._m_touch_is_bind){var t,i,a,r,d=0,l=0,h=!1,c=function(){clearTimeout(a),clearTimeout(r)},v=function(t){h=!1,c(),n._trigger(o.TAP,e,t)},u=function(a){a.stopPropagation();var l=n.hasTouch?a.touches[0]:a;t=l.pageX,y1=l.pageY,i=0,y2=0,h=!0,d=+new Date,n._trigger(o.SWIPE_START,e,a),clearTimeout(r),r=setTimeout(function(){h=!1,c(),n._trigger(o.LONG_TAP,e,a)},s.longTapDelay)},_=function(a){if(h){var r=n.hasTouch?a.touches[0]:a;+new Date;a.startPosition={pageX:t,pageY:y1},n._trigger(o.SWIPING,e,a),i=r.pageX,y2=r.pageY;var d=Math.abs(t-i),l=Math.abs(y1-y2);(d>s.tapMaxDistance||l>s.tapMaxDistance)&&c()}},m=function(r){if(h){var u=n.hasTouch?r.changedTouches[0]:r;i=u.pageX,y2=u.pageY;var _=+new Date;n._trigger(o.SWIPE_END,e,r);var m=Math.abs(t-i),p=Math.abs(y1-y2);if(m<=s.tapMaxDistance&&p<=s.tapMaxDistance)e._m_touch_events[o.DOUBLE_TAP]&&e._m_touch_events[o.DOUBLE_TAP].length?_-l>s.doubleTapDelay?(a=setTimeout(function(){v(r)},s.doubleTapDelay),l=_):(c(),n._trigger(o.DOUBLE_TAP,e,r),l=0):(v(r),l=_);else if(_-d<=s.swipeTime&&(m>s.swipeMinDistance||p>s.swipeMinDistance)){var f=n.swipeDirection(t,y1,i,y2);c(),n._trigger(o["SWIPE_"+f],e,r)}h=!1}};e.addEventListener(o.TOUCH_START,u),e.addEventListener(o.TOUCH_MOVE,_),e.addEventListener(o.TOUCH_END,m),e.addEventListener(o.TOUCH_CANCEL,c),e._m_touch_is_bind=!0}}var n={hasTouch:!!("ontouchstart"in window),isProxyTarget:function(e,t){return 0===t.indexOf(".")?new RegExp("(\\s|^)"+t.substring(1)+"(\\s|$)").test(e.className):0===t.indexOf("#")?e.id==t.substring(1):e.tagName.toLocaleLowerCase()==t},swipeDirection:function(e,t,i,n){return Math.abs(e-i)>=Math.abs(t-n)?e>i?"LEFT":"RIGHT":t>n?"UP":"DOWN"},_trigger:function(e,t,i){var n=i.target,s=t||i.currentTarget||i.target;if(n&&s._m_touch_events.hasOwnProperty(e))for(var o=s._m_touch_events,a=o[e];;){if(!n)return;if(n===s)return void this._execHandler(a,e,n,i,!0);var r=a;if(a=this._execHandler(r,e,n,i,!1),a===!1)return;n=n.parentNode}},_execHandler:function(e,t,i,n,s){var o,a,r,d,l=[],h=[];for(o=0,a=e.length;a>o;o++)r=e[o],d=r.proxyStr,s?!d&&l.push(r):d&&this.isProxyTarget(i,d)?l.push(r):h.push(r);var c;if(l.length)for(o=0,a=l.length;a>o;o++)if(c=l[o].handler,this._callback(t,c,i,n)===!1)return!1;return h},_callback:function(e,t,i,n){var s=this.hasTouch?n.touches.length?n.touches[0]:n.changedTouches[0]:n,o={type:e,target:n.target,pageX:s.pageX||0,pageY:s.pageY||0};/^swip/.test(e)&&n.startPosition&&(o.startX=n.startPosition.pageX,o.startY=n.startPosition.pageY,o.moveX=o.pageX-o.startX,o.moveY=o.pageY-o.startY),n.mTouchEvent=o;var a=t.call(i,n);return a===!1&&(n.preventDefault(),n.stopPropagation()),a}},s={tapMaxDistance:5,doubleTapDelay:200,longTapDelay:700,swipeMinDistance:5,swipeTime:300},o={TOUCH_START:n.hasTouch?"touchstart":"mousedown",TOUCH_MOVE:n.hasTouch?"touchmove":"mousemove",TOUCH_END:n.hasTouch?"touchend":"mouseup",TOUCH_CANCEL:"touchcancel",TAP:"tap",DOUBLE_TAP:"doubletap",LONG_TAP:"longtap",SWIPE_START:"swipestart",SWIPING:"swiping",SWIPE_END:"swipeend",SWIPE_LEFT:"swipeleft",SWIPE_RIGHT:"swiperight",SWIPE_UP:"swipeup",SWIPE_DOWN:"swipedown"},a=function(e){[].forEach.call(e,function(e,t){e._m_touch_events=e._m_touch_events||{},i.call(null,e),this[t]=e}.bind(this)),this.length=e.length};a.prototype={each:function(e){for(var t=0,i=this.length;i>t;t++)e.call(this[t],t);return this},on:function(e,t,i){if("function"==typeof t&&(i=t,t=null),"function"!=typeof i||!e||!e.length)return this;var n=e.split(/\s+/);return this.each(function(){var e=this._m_touch_events;n.forEach(function(n,s){e[n]||(e[n]=[]),e[n].push({handler:i,proxyStr:t})})}),this},off:function(e,t,i){return"function"==typeof t&&(i=t,t=null),this.each(function(){var n=this._m_touch_events;if(!e)return void(this._m_touch_events={});if(n.hasOwnProperty(e)&&n[e].length){if(!t&&!i)return void(n[e]=[]);for(var s,o=n[e],a=o.length-1;a>=0;)s=o[a],t&&"function"==typeof i?s.proxyStr===t&&s.handler===i&&o.splice(a,1):t&&s.proxyStr===t?o.splice(a,1):"function"==typeof i&&s.handler===i&&o.splice(a,1),a--}}),this}};var r=function(e){var i;return i=e===t||1===e.nodeType?[e]:t.querySelectorAll(e),new a(i)};return r.config=function(e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t])},r});var Advertising={baseRandom:(Math.random()+"").replace(".",""),baseZIndex:999,iframeZIndex:9999,adv_banner_id:"_adv_banner",div_banner:null,bannerWidth:100,bannerHeight:100,adv_rotation_id:"_adv_rotation",div_rotation:null,rotationWidth:100,rotationHeight:240,div_pop:null,adv_iframe_id:"_adv_iframe",iframe_back_btn_id:"_adv_iframe_back",adv_video_div_id:"_video_div",div_video:null,adv_video_id:"_advertisingVideo",myVideo:null,playTime:(new Date).getTime(),top:0,left:0,width:200,height:100,init:function(e,t,i,n){this.adv_banner_id="_adv_banner"+this.baseRandom,this.adv_video_div_id="_video_div"+this.baseRandom,this.adv_video_id="_advertisingVideo"+this.baseRandom,this.adv_iframe_id="_adv_iframe"+this.baseRandom,this.iframe_back_btn_id="_adv_iframe_back"+this.baseRandom,this.adv_rotation_id="_adv_rotation"+this.baseRandom,this.top=e,this.left=t,i>this.width&&(this.width=i),n>this.height&&(this.height=n),this.bannerWidth=window.screen.width,this.rotationWidth=window.screen.width,this.div_video||this.createPop(),this.onLoop()},onLoop:function(){setTimeout(Advertising.onLoop,500)},createPop:function(){if(!this.div_video){var e=1;this.div_banner=document.createElement("div"),this.div_banner.id=this.adv_banner_id,this.div_banner.style.width=this.bannerWidth+"px",this.div_banner.style.height=this.bannerHeight+"px",this.div_banner.style.position="fixed",this.div_banner.style.zIndex=this.baseZIndex,this.div_banner.style.overflow="hidden",this.div_banner.style.left="0px",this.div_banner.style.bottom="0px",this.div_banner.style.backgroundColor="#000000",this.div_banner.style.display="block",document.getElementsByTagName("body").item(0).appendChild(this.div_banner),this.div_rotation=document.createElement("div"),this.div_rotation.id=this.adv_rotation_id,this.div_rotation.style.width=this.rotationWidth+"px",this.div_rotation.style.height=this.rotationHeight+"px",this.div_rotation.style.position="fixed",this.div_rotation.style.zIndex=this.baseZIndex+e++,this.div_rotation.style.left="0px",this.div_rotation.style.top=(window.screen.height-this.rotationHeight)/2+"px",this.div_rotation.style.backgroundColor="#000000",this.div_rotation.style.display="inline-block",document.getElementsByTagName("body").item(0).appendChild(this.div_rotation),this.div_video=document.createElement("div"),this.div_video.id=this.adv_video_div_id,this.div_video.style.width="100%",this.div_video.style.height="100%",this.div_video.style.position="fixed",this.div_video.style.zIndex=this.baseZIndex+e++,this.div_video.style.overflow="hidden",this.div_video.style.left=this.left+"px",this.div_video.style.top=this.top+"px",this.div_video.style.backgroundColor="#000000",this.div_video.style.display="none",this.div_video.onclick=this.clickAdvVideo,document.getElementsByTagName("body").item(0).appendChild(this.div_video);try{this.div_video.style["-webkit-overflow-scrolling"]="touch",this.div_video.style["overflow-y"]="scroll",this.width<this.height,this.div_banner.style["text-align"]="left",this.div_banner.style["-webkit-transform-style"]="preserve-3d",this.div_banner.style["-moz-transform-style"]="preserve-3d",this.div_banner.style["-ms-transform-style"]="preserve-3d",this.div_banner.style["transform-style"]="preserve-3d",this.div_banner.style["-webkit-flex-shrink"]="0",this.div_banner.style["-ms-flex"]="0 0 auto",this.div_banner.style["flex-shrink"]="0",this.div_rotation.style["text-align"]="left",this.div_rotation.style["-webkit-transform-style"]="preserve-3d",this.div_rotation.style["-moz-transform-style"]="preserve-3d",this.div_rotation.style["-ms-transform-style"]="preserve-3d",this.div_rotation.style["transform-style"]="preserve-3d",this.div_rotation.style["-webkit-flex-shrink"]="0",this.div_rotation.style["-ms-flex"]="0 0 auto",this.div_rotation.style["flex-shrink"]="0",this.div_rotation.style["overflow-y"]="hidden",this.div_rotation.style["overflow-x"]="scroll"}catch(t){}this.createVideo(),this.initBanner(),this.initRotation()}},createVideo:function(){this.myVideo=document.createElement("VIDEO"),this.myVideo.id=this.adv_video_id,this.myVideo.autoplay=!0,this.myVideo.style="width:100%;height:100%;object-fit:contain;",this.div_video.appendChild(this.myVideo)},createIframe:function(e){var t=document.createElement("iframe");t.id=this.adv_iframe_id,t.style.zIndex=this.iframeZIndex,t.style.backgroundColor="#fff",t.style.position="fixed",t.style.left="0px",t.style.bottom="0px",t.frameBorder="0",t.width="100%",t.height="100%",t.src=e,document.getElementsByTagName("body").item(0).appendChild(t);var i=document.createElement("div");i.id=this.iframe_back_btn_id,i.style.width="152px",i.style.height="40px",i.style.transition="all 0.5s",i.style.left="-10px",i.style.top="-1px",i.style.display="block",i.style.position="absolute",i.style.zIndex=this.iframeZIndex+1,i.innerHTML='<img width="100%" height="100%" src="res/btn_back.png" />',document.getElementsByTagName("body").item(0).appendChild(i),mTouch("#"+this.iframe_back_btn_id).on("tap",function(){Advertising.closeIframe()});var n,s,o=function(e){var t=parseInt(e.style.left)||0,i=parseInt(e.offsetWidth)||0,n=(document.documentElement||document.body).offsetWidth;t=t>(n-i)/2?n-i+10:-10,e.style.transition="all .2s",e.style.transition="all .2s",e.style.left=t+"px",s=setTimeout(function(){e.style.transition="all .5s",e.style.transition="all .5s"},2e3)};mTouch("#"+this.iframe_back_btn_id).on("swipestart",function(e){return clearTimeout(s),e.stopPropagation(),this.style.transition="none",this.style.transition="none",n=parseInt(this.style.left)||0,assistiveTop=parseInt(this.style.top)||0,!1}).on("swiping",function(e){e.stopPropagation(),this.style.left=n+e.mTouchEvent.moveX+"px",this.style.top=assistiveTop+e.mTouchEvent.moveY+"px"}).on("swipeend",function(){o(this)});var a=navigator.control||{};a.gesture&&a.gesture(!1)},closeIframe:function(){Advertising.removeElement(Advertising.getElement(Advertising.adv_iframe_id)),Advertising.removeElement(Advertising.getElement(Advertising.iframe_back_btn_id)),console.log("back to game")},initBanner:function(){var e="https://www.baidu.com/index.php";this.div_banner.innerHTML='<img style="max-width: 640px;" width="100%" height="100%" src="res/102084_banner_640240.jpg" onclick="Advertising.clickAdvBanner(\''+e+"');\"/>"},initRotation:function(){for(var e=[{img:"res/102084_banner_640240.jpg",url:"https://www.baidu.com/index.php"},{img:"res/163_banner_640240.jpg",url:"http://www.layabox.com/"}],t=e.length,i='<div style="width:'+this.rotationWidth*t+'px;height:100%">',n=0;t>n;n++)i+='<div style="width:'+this.rotationWidth+'px;height: 100%;float:left;"><img src="'+e[n].img+'" onclick="Advertising.clickAdvBanner(\''+e[n].url+"');\"/></div>";i+="</div>",this.div_rotation.innerHTML=i},getElement:function(e){return document.getElementById(e)},closeVideo:function(){Advertising.myVideo&&Advertising.myVideo.pause(),this.exitFullScreen(),this.div_video.style.display="none"},removeElement:function(e){if(null!=e&&void 0!=e&&"undefined"!=e){var t=e.parentNode;t&&t.removeChild(e)}},launchFullScreen:function(e){if(e.requestFullscreen)e.requestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else if(e.msRequestFullscreen)e.msRequestFullscreen();else if(e.oRequestFullscreen)e.oRequestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullScreen();else{var t=document.documentElement,i=document.body,n="width:100%;height:100%;overflow:hidden;";t.style.cssText=n,i.style.cssText=n,this.div_video.style.cssText=n+";margin:0px;padding:0px;",document.IsFullScreen=!0}},exitFullScreen:function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.msExitFullscreen)document.msExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.oRequestFullscreen)document.oCancelFullScreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.IsFullScreen){var e=document.documentElement,t=document.body;e.style.cssText="",t.style.cssText="",this.div_video.style.cssText="",document.IsFullScreen=!1}},play:function(e){this.div_video||this.createPop(),this.div_video.style.display="block",this.myVideo&&(this.myVideo.src=e,this.myVideo.play()),this.playTime=(new Date).getTime(),this.width>=this.height,this.playOver()},clickAdvVideo:function(){window.open("https://www.baidu.com/index.php"),Advertising.closeVideo()},clickAdvBanner:function(e){this.createIframe(e)},eventVideo:function(e){this.myVideo.addEventListener(e,function(){console.log((new Date).getTime(),e)},!1)},playOver:function(){var e=(new Date).getTime()-Advertising.playTime;return Advertising.myVideo&&(Advertising.myVideo.ended||Advertising.myVideo.duration>0&&e>=1e3*Advertising.myVideo.duration)?void Advertising.closeVideo():e>3e4?void Advertising.closeVideo():void setTimeout(Advertising.playOver,500)}};Advertising.init(0,0,window.screen.width,window.screen.height);